openapi: 3.0.3
info:
  title: Multi-X ERP SaaS API
  description: |
    Comprehensive REST API for Multi-X ERP SaaS platform providing enterprise resource planning capabilities
    including inventory management, CRM, procurement, POS, manufacturing, finance, and reporting.
    
    ## Authentication
    This API uses Bearer token authentication via Laravel Sanctum. Include the token in the Authorization header:
    ```
    Authorization: Bearer {your-access-token}
    ```
    
    ## Multi-Tenancy
    All authenticated requests are automatically scoped to the user's tenant. Tenant isolation is enforced at the database level.
    
    ## Pagination
    List endpoints support pagination with the following query parameters:
    - `page`: Page number (default: 1)
    - `per_page`: Items per page (default: 15, max: 100)
    
    ## Error Handling
    API errors follow a consistent format:
    ```json
    {
      "success": false,
      "message": "Error description",
      "errors": {
        "field": ["Validation error message"]
      }
    }
    ```
  version: 1.0.0
  contact:
    name: Multi-X ERP Support
  license:
    name: MIT

servers:
  - url: http://localhost:8000/api/v1
    description: Local development server
  - url: https://api.multi-x-erp.example.com/api/v1
    description: Production server

tags:
  - name: Authentication
    description: User authentication and authorization
  - name: Inventory
    description: Product and stock management
  - name: CRM
    description: Customer relationship management
  - name: Procurement
    description: Purchase orders and supplier management
  - name: POS
    description: Point of sale operations
  - name: Manufacturing
    description: Production and bill of materials
  - name: Finance
    description: Financial accounting and reporting
  - name: Reporting
    description: Analytics and custom reports
  - name: IAM
    description: Identity and access management

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Laravel Sanctum API token

  schemas:
    Error:
      type: object
      properties:
        success:
          type: boolean
          example: false
        message:
          type: string
          example: "Validation error"
        errors:
          type: object

    Product:
      type: object
      properties:
        id:
          type: integer
        code:
          type: string
        name:
          type: string
        type:
          type: string
          enum: [inventory, service, combo, bundle]
        buying_price:
          type: number
        selling_price:
          type: number
        stock_quantity:
          type: integer

paths:
  /auth/login:
    post:
      tags:
        - Authentication
      summary: Login user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - email
                - password
              properties:
                email:
                  type: string
                  format: email
                password:
                  type: string
      responses:
        '200':
          description: Login successful
        '401':
          description: Invalid credentials

  /inventory/products:
    get:
      tags:
        - Inventory
      summary: List all products
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Successful response
